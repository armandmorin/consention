<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z' fill='%234f46e5'/%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Consent Management Dashboard</title>
    
    <!-- Preload React and ReactDOM with matching crossorigin attribute -->
    <link rel="preload" href="https://unpkg.com/react@18/umd/react.production.min.js" as="script" crossorigin="anonymous" />
    <link rel="preload" href="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" as="script" crossorigin="anonymous" />
    
    <!-- Include React and ReactDOM from CDN as fallbacks -->
    <script crossorigin="anonymous" src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin="anonymous" src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- SPA routing fix for Vercel/Netlify -->
    <script>
      // This script handles routing for static hosting platforms
      (function() {
        // Redirect all non-root paths to index.html via meta refresh
        // This works in all browsers and hosting platforms
        if(typeof window !== 'undefined' && window.location.pathname !== '/' 
           && !window.location.pathname.includes('.')) {
          // Save the intended path in sessionStorage
          sessionStorage.setItem('redirectPath', window.location.pathname);
          window.location.replace('/');
        }
        
        // Handle redirect if we have a saved path
        if(typeof window !== 'undefined' && window.location.pathname === '/' 
           && sessionStorage.getItem('redirectPath')) {
          window.history.replaceState(null, '', sessionStorage.getItem('redirectPath'));
          sessionStorage.removeItem('redirectPath');
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Auth is now handled by Supabase directly -->
  </body>
</html>
